
<!DOCTYPE html>
<html lang="en">
<head>
  
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.53" />

    
    
    

<title>Apache Camel : How to call  java webservice • A Morsel Of Code</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Apache Camel : How to call  java webservice"/>
<meta name="twitter:description" content="I have made up my mind to get rid of WSO2 ESB at my office. It is clumsy, buggy, hard to test, no body wants to work on it and the documentation is horrible. I looked at various alternative and Apache Camel was free and easy to set up and work with me.
To cut the story short, I was able to run most of the example but was struggling with CXF to call a third party service hosted at a random url."/>

<meta property="og:title" content="Apache Camel : How to call  java webservice" />
<meta property="og:description" content="I have made up my mind to get rid of WSO2 ESB at my office. It is clumsy, buggy, hard to test, no body wants to work on it and the documentation is horrible. I looked at various alternative and Apache Camel was free and easy to set up and work with me.
To cut the story short, I was able to run most of the example but was struggling with CXF to call a third party service hosted at a random url." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2013/12/16/apache-camel-how-to-call-an-external-webservice/" /><meta property="article:published_time" content="2013-12-16T03:55:12&#43;00:00"/>
<meta property="article:modified_time" content="2013-12-16T03:55:12&#43;00:00"/>



<link rel="canonical" href="/2013/12/16/apache-camel-how-to-call-an-external-webservice/" />

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">





<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Allerta+Stencil">

<link rel="stylesheet" href="/css/w3.css" />


<link rel="stylesheet" href="/css/style.css" />









  
  
</head>
<body }

class="w3-light-grey">


    
    <header id="header">
         
        <div class="w3-right ">
<div class="w3-bar w3-light-grey  ">
  
  <span class="w3-bar-item w3-left " id="google_translate_element"></span>
<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement(
      {
          pageLanguage: 'en'
        , layout: google.translate.TranslateElement.FloatPosition.TOP_RIGHT
        , multilanguagePage: true
      }
      , 'google_translate_element'
    );
  }
</script>
<script async src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


  
       <a href="javascript:void(0)" class="w3-bar-item w3-button w3-hover-green" title="Search" onclick="displaysearch()"><i class="fa fa-search"></i></a>
  
      <span class="w3-hide-small">
        
        <a href="mailto:dinesh19aug@gmail.com" class="w3-bar-item w3-button w3-hover-green"><i class="fa fa-envelope"></i></a>
        
        <a href="https://stackoverflow.com/users/1172194/dinesh-arora" class="w3-bar-item w3-button w3-hover-green"><i class="fa fa-stack-overflow"></i></a>
        
        <a href="https://twitter.com/dinesh19aug" class="w3-bar-item w3-button w3-hover-green"><i class="fa fa-twitter"></i></a>
        
        <a href="https://github.com/dinesh19aug" class="w3-bar-item w3-button w3-hover-green"><i class="fa fa-github"></i></a>
        
        <a href="https://www.linkedin.com/in/dinesharora" class="w3-bar-item w3-button w3-hover-green"><i class="fa fa-linkedin"></i></a>
        
        <a href="https://github.com/dinesh19aug" class="w3-bar-item w3-button w3-hover-green"><i class="fa fa-github"></i></a>

      </span>
  
</div>
</div>
<br>
  <div class="w3-content">
  
  <div class="w3-container w3-center w3-padding-32 w3-hide-small"> 
      <h1 class="w3-xxxlarge w3-text-blue w3-wide w3-allerta  " style="text-shadow:1px 1px 0 #444" ><u>
      
         A Morsel Of Code - One Byte At A Time
      
</u></h1>
      
    </div>
    <div class="w3-content w3-center">
    <div class="w3-bar w3-light-grey w3-border">
    <a href="/" class="w3-bar-item w3-button w3-large w3-green"><i class="fa fa-home"></i></a>
    
      <a href="/categories/" class="w3-bar-item w3-button w3-hide-small">Categories</a>
    
      <a href="/tags/" class="w3-bar-item w3-button w3-hide-small">Tags</a>
    
   
    
    <a href="javascript:void(0)" class="w3-bar-item w3-button w3-right w3-hide-large w3-hide-medium" onclick="displaymenu()">&#9776;</a>
  </div>

<div id="mobilemenu" class="w3-bar-block w3-light-grey w3-hide w3-hide-large w3-hide-medium">
  
      <a href="/categories/" class="w3-bar-item w3-button">Categories</a>
      
      <a href="/tags/" class="w3-bar-item w3-button">Tags</a>
      
  
</div>
</div>
</div>
<script>
function displaymenu() {
    var x = document.getElementById("mobilemenu");
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else { 
        x.className = x.className.replace(" w3-show", "");
    }
}
</script>



  <div id="searchOverlay" class="overlay w3-hide">
    <span class="closebtn" onclick="displaysearch()" title="Close Overlay">×</span>
    <div class="overlay-content">
        <form action="/search/">
          <input type="text" placeholder="Search.." name="q">
          <button type="submit"><i class="fa fa-search"></i></button>
        </form>
    </div>
  </div>

  <script>
  function displaysearch() {
    var x = document.getElementById("searchOverlay");
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else { 
        x.className = x.className.replace(" w3-show", "");
    }
      
  }

 
  </script>

  


    
    <hr class="headfoot">
   
      
    </header>
    
<div class="w3-content">
    
      <div>
        <div id="content" >
          
    

 
     


  <div class="w3-content w3-card-4" >
    
    <header class="w3-container w3-center w3-padding-32">
      <h1>Apache Camel : How to call  java webservice</h1>

      <div >
        <p> 2013-12-16 
          
             <code> 738 words  </code>
             <code> 4 mins read </code>
          
        </p>
        <div >
            
              <a class="w3-btn w3-small w3-round w3-green" href="/categories/tech-notes/"> Tech Notes </a>
            
          </div>
       
        
      </div>
    </header>

   
    
    <div class="w3-container">
      
        

        
        

        
          <p>I have made up my mind to get rid of WSO2 ESB at my office. It is clumsy, buggy, hard to test, no body wants to work on it and the documentation is horrible. I looked at various alternative and <a title="Apache Camel" href="http://camel.apache.org/" target="_blank">Apache Camel</a> was free and easy to set up and work with me.</p>

<p>To cut the story short, I was able to run most of the example but was struggling with <a title="CXF" href="http://cxf.apache.org/" target="_blank">CXF</a> to call a third party service hosted at a random url. The documentation on the website is focused on exposing web service built in <a title="Apache Camel" href="http://camel.apache.org" target="_blank">Camel</a>. I was finally able to figure this out with a couple of slide show on slideshare.</p>

<p>Here&#8217;s the scenario: I have a third party webservice hosted on the web which gives you the the conversion rate between two currencies. I am going to call this web service and log the response.</p>

<p>As usual I will start from scratch. My webservice is hosted at this url &#8211;<a title="http://www.webservicex.net/CurrencyConvertor.asmx?WSDL" href="http://www.webservicex.net/CurrencyConvertor.asmx?WSDL" target="_blank"><a href="http://www.webservicex.net/CurrencyConvertor.asmx?WSDL">http://www.webservicex.net/CurrencyConvertor.asmx?WSDL</a></a>. This webservice exposes a operation called &#8211; &#8220;ConversionRate&#8221;.</p>

<p>I am using Fuse Ide(free &#8211; Developer version) but you can use Intellij Or Eclipse.</p>

<p>Prerequisites &#8211; Must have Maven.</p>

<p><strong>Step 1: </strong>Create a new Camel-Spring project.</p>

<p><strong>Step 2: </strong> Add the following dependencies in your <strong>pom.xml. &#8220;camel-cxf&#8221;</strong></p>

<pre>&lt;scope><span style="color: #ff0000;">&lt;dependency&gt;</span>

<span style="color: #ff0000;">      &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;</span>

<span style="color: #ff0000;">      &lt;artifactId&gt;camel-cxf&lt;/artifactId&gt;</span>

<span style="color: #ff0000;">      &lt;version&gt;2.10.0.redhat-60024&lt;/version&gt;</span>

<span style="color: #ff0000;">    &lt;/dependency&gt;</span>&lt;/scope></pre>

<p>My pom.xml looks like this &#8211;</p>

<blockquote>
<p><span style="color: #ff0000;">&lt;!&#8211;?xml version=&#8221;1.0&#8243; encoding=&#8221;UTF-8&#8243;?&gt;</span></p>

<p><span style="color: #ff0000;">xmlns=&#8221;<a href="http://maven.apache.org/POM/4.0.0&amp;#8243">http://maven.apache.org/POM/4.0.0&amp;#8243</a>; xmlns:xsi=&#8221;<a href="http://www.w3.org/2001/XMLSchema-instance&amp;#8221">http://www.w3.org/2001/XMLSchema-instance&amp;#8221</a>; xsi:schemaLocation=&#8221;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd&amp;#8221;&gt;">http://maven.apache.org/maven-v4_0_0.xsd&amp;#8221;&gt;</a></span></p>

<p><span style="color: #ff0000;"> </span></p>

<p><span style="color: #ff0000;">  <modelVersion>4.0.0</modelVersion></span></p>

<p><span style="color: #ff0000;"> </span></p>

<p><span style="color: #ff0000;">  <groupId>com.mycompany</groupId></span></p>

<p><span style="color: #ff0000;">  <artifactId>camel-spring</artifactId></span></p>

<p><span style="color: #ff0000;">  <packaging>jar</packaging></span></p>

<p><span style="color: #ff0000;">  <version>1.0.0-SNAPSHOT</version></span></p>

<p><span style="color: #ff0000;">  <name>A Camel Spring Route</name></span></p>

<p><span style="color: #ff0000;">  <url><a href="http://www.myorganization.org">http://www.myorganization.org</a></url></span></p>

<p><span style="color: #ff0000;">  <properties></span></p>

<p><span style="color: #ff0000;">    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding></span></p>

<p><span style="color: #ff0000;">    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding></span></p>

<p><span style="color: #ff0000;">  </properties></span></p>

<p><span style="color: #ff0000;">  <repositories></span></p>

<p><span style="color: #ff0000;">    <repository></span></p>

<p><span style="color: #ff0000;">      <id>release.fusesource.org</id></span></p>

<p><span style="color: #ff0000;">      FuseSource Release Repository</span></p>

<p><span style="color: #ff0000;">      <url><a href="http://repo.fusesource.com/nexus/content/repositories/releases">http://repo.fusesource.com/nexus/content/repositories/releases</a></url></span></p>

<p><span style="color: #ff0000;">      <snapshots></span></p>

<p><span style="color: #ff0000;">        <enabled>false</enabled></span></p>

<p><span style="color: #ff0000;">      </snapshots></span></p>

<p><span style="color: #ff0000;">      <releases></span></p>

<p><span style="color: #ff0000;">        <enabled>true</enabled></span></p>

<p><span style="color: #ff0000;">      </releases></span></p>

<p><span style="color: #ff0000;">    </repository></span></p>

<p><span style="color: #ff0000;">    <repository></span></p>

<p><span style="color: #ff0000;">      <id>snapshot.fusesource.org</id></span></p>

<p><span style="color: #ff0000;">      FuseSource Snapshot Repository</span></p>

<p><span style="color: #ff0000;">      <url><a href="http://repo.fusesource.com/nexus/content/repositories/snapshots">http://repo.fusesource.com/nexus/content/repositories/snapshots</a></url></span></p>

<p><span style="color: #ff0000;">      <snapshots></span></p>

<p><span style="color: #ff0000;">        <enabled>true</enabled></span></p>

<p><span style="color: #ff0000;">      </snapshots></span></p>

<p><span style="color: #ff0000;">      <releases></span></p>

<p><span style="color: #ff0000;">        <enabled>false</enabled></span></p>

<p><span style="color: #ff0000;">      </releases></span></p>

<p><span style="color: #ff0000;">    </repository></span></p>

<p><span style="color: #ff0000;">  </repositories></span></p>

<p><span style="color: #ff0000;">  <pluginRepositories></span></p>

<p><span style="color: #ff0000;">    <pluginRepository></span></p>

<p><span style="color: #ff0000;">      <id>release.fusesource.org</id></span></p>

<p><span style="color: #ff0000;">      FuseSource Release Repository</span></p>

<p><span style="color: #ff0000;">      <url><a href="http://repo.fusesource.com/nexus/content/repositories/releases">http://repo.fusesource.com/nexus/content/repositories/releases</a></url></span></p>

<p><span style="color: #ff0000;">      <snapshots></span></p>

<p><span style="color: #ff0000;">        <enabled>false</enabled></span></p>

<p><span style="color: #ff0000;">      </snapshots></span></p>

<p><span style="color: #ff0000;">      <releases></span></p>

<p><span style="color: #ff0000;">        <enabled>true</enabled></span></p>

<p><span style="color: #ff0000;">      </releases></span></p>

<p><span style="color: #ff0000;">    </pluginRepository></span></p>

<p><span style="color: #ff0000;">    <pluginRepository></span></p>

<p><span style="color: #ff0000;">      <id>snapshot.fusesource.org</id></span></p>

<p><span style="color: #ff0000;">      FuseSource Snapshot Repository</span></p>

<p><span style="color: #ff0000;">      <url><a href="http://repo.fusesource.com/nexus/content/repositories/snapshots">http://repo.fusesource.com/nexus/content/repositories/snapshots</a></url></span></p>

<p><span style="color: #ff0000;">      <snapshots></span></p>

<p><span style="color: #ff0000;">        <enabled>true</enabled></span></p>

<p><span style="color: #ff0000;">      </snapshots></span></p>

<p><span style="color: #ff0000;">      <releases></span></p>

<p><span style="color: #ff0000;">        <enabled>false</enabled></span></p>

<p><span style="color: #ff0000;">      </releases></span></p>

<p><span style="color: #ff0000;">    </pluginRepository>  </span></p>

<p><span style="color: #ff0000;">  </pluginRepositories></span></p>

<p><span style="color: #ff0000;"> </span></p>

<p><span style="color: #ff0000;">  <dependencies></span></p>

<p><span style="color: #ff0000;">    <dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>org.apache.camel</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>camel-core</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>2.10.0.redhat-60024</version></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;">    <dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>org.apache.camel</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>camel-spring</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>2.10.0.redhat-60024</version></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;">    &lt;!&#8211; logging &#8211;&gt;</span></p>

<p><span style="color: #ff0000;">    <dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>org.slf4j</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>slf4j-api</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>1.6.6</version></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;">    <dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>org.slf4j</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>slf4j-log4j12</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>1.6.6</version></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;">    <dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>log4j</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>log4j</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>1.2.17</version></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;">    &lt;!&#8211; testing &#8211;&gt;</span></p>

<p><span style="color: #ff0000;">    <dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>org.apache.camel</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>camel-test-spring</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>2.10.0.redhat-60024</version></span></p>

<p><span style="color: #ff0000;">      <scope>test</scope></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;"><dependency></span></p>

<p><span style="color: #ff0000;">      <groupId>org.apache.camel</groupId></span></p>

<p><span style="color: #ff0000;">      <artifactId>camel-cxf</artifactId></span></p>

<p><span style="color: #ff0000;">      <version>2.10.0.redhat-60024</version></span></p>

<p><span style="color: #ff0000;">    </dependency></span></p>

<p><span style="color: #ff0000;">  </dependencies></span></p>

<p><span style="color: #ff0000;">  <build></span></p>

<p><span style="color: #ff0000;">    <defaultGoal>install</defaultGoal></span></p>

<p><span style="color: #ff0000;">    <plugins></span></p>

<p><span style="color: #ff0000;">      <plugin></span></p>

<p><span style="color: #ff0000;">        <groupId>org.apache.maven.plugins</groupId></span></p>

<p><span style="color: #ff0000;">        <artifactId>maven-compiler-plugin</artifactId></span></p>

<p><span style="color: #ff0000;">        <version>2.5.1</version></span></p>

<p><span style="color: #ff0000;">        <configuration></span></p>

<p><span style="color: #ff0000;">          <source>1.6</source></span></p>

<p><span style="color: #ff0000;">          <target>1.6</target></span></p>

<p><span style="color: #ff0000;">        </configuration></span></p>

<p><span style="color: #ff0000;">      </plugin></span></p>

<p><span style="color: #ff0000;">      <plugin></span></p>

<p><span style="color: #ff0000;">        <groupId>org.apache.maven.plugins</groupId></span></p>

<p><span style="color: #ff0000;">        <artifactId>maven-resources-plugin</artifactId></span></p>

<p><span style="color: #ff0000;">        <version>2.4.3</version></span></p>

<p><span style="color: #ff0000;">        <configuration></span></p>

<p><span style="color: #ff0000;">          <encoding>UTF-8</encoding></span></p>

<p><span style="color: #ff0000;">        </configuration></span></p>

<p><span style="color: #ff0000;">      </plugin></span></p>

<p><span style="color: #ff0000;">      &lt;!&#8211; allows the route <span class="hiddenGrammarError">to be</span> ran via &#8216;mvn camel:run&#8217; &#8211;&gt;</span></p>

<p><span style="color: #ff0000;">      <plugin></span></p>

<p><span style="color: #ff0000;">        <groupId>org.apache.camel</groupId></span></p>

<p><span style="color: #ff0000;">        <artifactId>camel-maven-plugin</artifactId></span></p>

<p><span style="color: #ff0000;">        <version>2.10.0.redhat-60024</version></span></p>

<p><span style="color: #ff0000;">      </plugin></span></p>

<p><span style="color: #ff0000;">    </plugins></span></p>

<p><span style="color: #ff0000;">  </build></span></p>

<p><span style="color: #ff0000;"></project></span></p>
</blockquote>

<p><strong>Step 2: </strong>Under src/main.resources/META-INF folder(if not there then create one) create file called <strong>camel-context.xml. </strong> Your camel file should like this &#8211;</p>

<blockquote>
<p><span style="color: #ff0000;">&lt;?xml version=&#8221;1.0&#8243; encoding=&#8221;UTF-8&#8243;?&gt;</span></p>

<p><span style="line-height: 1.5; color: #ff0000;">xmlns=&#8221;<a href="http://www.springframework.org/schema/beans&amp;#8221">http://www.springframework.org/schema/beans&amp;#8221</a>;</span></p>

<p><span style="color: #ff0000;">        xmlns:xsi=&#8221;<a href="http://www.w3.org/2001/XMLSchema-instance&amp;#8221">http://www.w3.org/2001/XMLSchema-instance&amp;#8221</a>;</span></p>

<p><span style="color: #ff0000;">        xmlns:cxf=&#8221;<a href="http://camel.apache.org/schema/cxf&amp;#8221">http://camel.apache.org/schema/cxf&amp;#8221</a>;</span></p>

<p><span style="color: #ff0000;">        xsi:schemaLocation=&#8221;</span></p>

<p><span style="color: #ff0000;">        <a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a> <a href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a></span></p>

<p><span style="color: #ff0000;">        <a href="http://camel.apache.org/schema/cxf">http://camel.apache.org/schema/cxf</a> <a href="http://camel.apache.org/schema/cxf/camel-cxf.xsd">http://camel.apache.org/schema/cxf/camel-cxf.xsd</a></span></p>

<p><span style="color: #ff0000;">        <a href="http://camel.apache.org/schema/spring">http://camel.apache.org/schema/spring</a> <a href="http://camel.apache.org/schema/spring/camel-spring.xsd&amp;#8221;&gt;">http://camel.apache.org/schema/spring/camel-spring.xsd&amp;#8221;&gt;</a></span></p>

<p><span style="color: #ff0000;"> <span style="line-height: 1.5;"> <cxf:<span class="hiddenSpellError">cxfEndpoint id=&#8221;wsdlEndpoint&#8221;</span></span></span></p>

<p><span style="color: #ff0000;">                     address=&#8221;<a href="http://www.webservicex.net/CurrencyConvertor.asmx&amp;#8221">http://www.webservicex.net/CurrencyConvertor.asmx&amp;#8221</a>;</span></p>

<p><span style="color: #ff0000;">                     endpointName=&#8221;c:SOAPOverHTTP&#8221;</span></p>

<p><span style="color: #ff0000;">                     serviceName=&#8221;c:CurrencyConvertor&#8221;</span></p>

<p><span style="color: #ff0000;">                     xmlns:s=&#8221;<a href="http://www.webserviceX.NET&amp;#8221;/&gt;">http://www.webserviceX.NET&amp;#8221;/&gt;</a></span></p>

<p><span style="color: #ff0000;">  </span></p>

<p><span style="color: #ff0000;">  <camelContext xmlns=&#8221;http://camel.apache.org/schema/spring&#8221;></span></p>

<p><span style="color: #ff0000;">  <route></span></p>

<p><span style="color: #ff0000;">        here is a sample which processes the input files</span></p>

<p><span style="color: #ff0000;">         (leaving them in place &#8211; see the &#8216;noop&#8217; flag)</span></p>

<p><span style="color: #ff0000;">         then performs content based routing on the message using XPath</description></span></p>

<p><span style="color: #ff0000;">        src/data/order?noop=true&#8221;/&gt;</span></p>

<p><span style="color: #ff0000;">        <log message=&#8221;${body}&#8221;/></span></p>

<p><span style="color: #ff0000;">        wsdl&amp;serviceName={<a href="http://www.webserviceX.NET/}CurrencyConvertor&amp;portName={http://www.webserviceX.NET/}CurrencyConvertorSoap&amp;dataFormat=MESSAGE&amp;#8221;/&gt;">http://www.webserviceX.NET/}CurrencyConvertor&amp;portName={http://www.webserviceX.NET/}CurrencyConvertorSoap&amp;dataFormat=MESSAGE&amp;#8221;/&gt;</a></span></p>

<p><span style="color: #ff0000;">         <log message=&#8221;${body}&#8221;/></span></p>

<p><span style="color: #ff0000;">    </route></span></p>

<p><span style="color: #ff0000;"></camelContext></span></p>

<p><span style="color: #ff0000;"> </span></p>

<p><span style="color: #ff0000;"></beans></span></p>
</blockquote>

<p><strong>Step 4: </strong>Place the payload or input data xml in src/data/input/order.xml. The <strong>order.xml </strong>should like this &#8211;</p>

<blockquote>
<p><span style="color: #ff0000;"><soapenv:Envelope xmlns:soapenv=&#8221;http://schemas.xmlsoap.org/soap/envelope/&#8221; xmlns:web=&#8221;http://www.webserviceX.NET/&#8221;></span></p>

<p><span style="color: #ff0000;">   <a href="soapenv:Header/">soapenv:Header/</a></span></p>

<p><span style="color: #ff0000;">   <a href="soapenv:Body">soapenv:Body</a></span></p>

<p><span style="color: #ff0000;">      <a href="web:ConversionRate">web:ConversionRate</a></span></p>

<p><span style="color: #ff0000;">         <a href="web:FromCurrency">web:FromCurrency</a>AUD<a href="/web:FromCurrency">/web:FromCurrency</a></span></p>

<p><span style="color: #ff0000;">         <a href="web:ToCurrency">web:ToCurrency</a>USD<a href="/web:ToCurrency">/web:ToCurrency</a></span></p>

<p><span style="color: #ff0000;">      <a href="/web:ConversionRate">/web:ConversionRate</a></span></p>

<p><span style="color: #ff0000;">   &lt;!&#8211;<span class="hiddenSpellError">soapenv</span>:Body&gt;&#8211;&gt;</span></p>

<p><span style="color: #ff0000;">&lt;!&#8211;<span class="hiddenSpellError">soapenv</span>:Envelope&gt;&#8211;&gt;</span></p>
</blockquote>

<p>That&#8217;s it!!!!</p>

<p><span style="color: #000000;">The interesting part is all in the camel-context.xml. Here&#8217;s what is happening in this file</span></p>

<p><strong>src/data/order?noop=true&#8221;/&gt;</strong></p>

<p>This line reads the file order.xml. The option noop=true makes the file to be read again and again. By default this values is false. If this value is false, then after one read, camel marks it as read and when you run the example for second time, it will not read this file.</p>

<p><strong><log message=&#8221;${body}&#8221;/></strong></p>

<p>This line will simply log the contents of <strong>order.xml.</strong></p>

<p><strong>serviceName={<a href="http://www.webserviceX.NET/}CurrencyConvertor&amp;portName={http://www.webserviceX.NET/}CurrencyConvertorSoap&amp;dataFormat=MESSAGE&amp;#8221;/&gt;">http://www.webserviceX.NET/}CurrencyConvertor&amp;portName={http://www.webserviceX.NET/}CurrencyConvertorSoap&amp;dataFormat=MESSAGE&amp;#8221;/&gt;</a></strong></p>

<p><strong> </strong>This line tells <strong>cxf </strong>component that it needs to call the webservice &#8211;  <strong><a href="http://www.webservicex.net/CurrencyConvertor.asmx?wsdl">http://www.webservicex.net/CurrencyConvertor.asmx?wsdl</a></strong></p>

<p>-URL &#8211; is the url of the wsdl <strong><a href="http://www.webservicex.net/CurrencyConvertor.asmx?wsdl">http://www.webservicex.net/CurrencyConvertor.asmx?wsdl</a></strong></p>

<ul>
<li>serviceName &#8211; is the name of the service. Remember it is the name of teh service not the oepration!! The value between {} is the namespace. If you do not want to write {http://&#8230;.} then add another tag <strong>xmlns   </strong>&#8211; <strong>{<a href="http://www.webserviceX.NET/}CurrencyConvertor. ">http://www.webserviceX.NET/}CurrencyConvertor. </a></strong></li>
<li>portName &#8211; is the name of the port.</li>
</ul>

<p><strong>portName={<a href="http://www.webserviceX.NET/}CurrencyConvertorSoap. ">http://www.webserviceX.NET/}CurrencyConvertorSoap. </a></strong>This is again preceded by {http://&#8230;} which is the namespace value. This value is defined in the wsdl as &#8211;<strong><a href="wsdl:port name=&amp;#8221;CurrencyConvertorSoap&amp;#8221; binding=&amp;#8221;tns:CurrencyConvertorSoap&amp;#8221;">wsdl:port name=&amp;#8221;CurrencyConvertorSoap&amp;#8221; binding=&amp;#8221;tns:CurrencyConvertorSoap&amp;#8221;</a></strong></p>

<p>The last piece is <strong>dataFormat </strong> &#8211; <strong>dataFormat=MESSAGE. </strong>This tells that the body is of type message.</p>

<p><strong>Part 2</strong> &#8211; In production you would want to avoid writing cxf in the above format as it is prone to error because the string value is very long and difficult to test independently and cannot be reused if you want to call the service in another route. So the best way is to define this as cxf endpoint. All you need to do is slighly modify the <strong>camel-context.xml. </strong></p>

<ol>
<li>Add this(be sure to remove the earlier version of &lt;to uri=&#8221;cxf&#8230;.&#8221;)</li>
</ol>

<p><strong><to uri=&#8221;cxf:bean:wsdlEndpoint?dataFormat=MESSAGE&#8221;/></strong></p>

<ol>
<li>Define the cxf endpoint called <strong>wsdlEndpoint</strong> (You call it whatever you want).</li>
</ol>

<p><strong><cxf:<span class="hiddenSpellError">cxfEndpoint id=&#8221;wsdlEndpoint&#8221;</span></strong></p>

<p><strong>                     address=&#8221;<a href="http://www.webservicex.net/CurrencyConvertor.asmx&amp;#8221">http://www.webservicex.net/CurrencyConvertor.asmx&amp;#8221</a>;</strong></p>

<p><strong>                     endpointName=&#8221;c:SOAPOverHTTP&#8221;</strong></p>

<p><strong>                     serviceName=&#8221;c:CurrencyConvertor&#8221;</strong></p>

<p><strong>                     xmlns:s=&#8221;<a href="http://www.webserviceX.NET&amp;#8221;/&gt;">http://www.webserviceX.NET&amp;#8221;/&gt;</a></strong></p>

<p>That&#8217;s it.</p>

<p>Now just run the app. This will print the following-</p>

<blockquote>
<p>[ead #0 &#8211; file://src/data/order] route1                         INFO</p>
</blockquote>

<p><a href="soapenv:Header/">soapenv:Header/</a></p>

<p><a href="soapenv:Body">soapenv:Body</a></p>

<p><a href="web:ConversionRate">web:ConversionRate</a></p>

<p><a href="web:FromCurrency">web:FromCurrency</a>AUD<a href="/web:FromCurrency">/web:FromCurrency</a></p>

<p><a href="web:ToCurrency">web:ToCurrency</a>USD<a href="/web:ToCurrency">/web:ToCurrency</a></p>

<p><a href="/web:ConversionRate">/web:ConversionRate</a></p>

<p>&lt;!&#8211;<span class="hiddenSpellError">soapenv</span>:Body&gt;&#8211;&gt;</p>

<p>&lt;!&#8211;<span class="hiddenSpellError">soapenv</span>:Envelope&gt;&#8211;&gt;</p>

<p>[           default-workqueue-1] route1                         INFO  <!--?xml version="1.0" encoding="utf-8"?-->0.8951</p>

<p>~~~~ Enjoy Cameling &#8230;.</p>

                 
                
         
      
    </div>

    
   

    <div class="w3-container">
    	
      
     
	</div>



  


    
    
    
    
    <br>  
</div>



<div class="w3-container w3-card-2 w3-black">
<div class="w3-row">
  <div class="w3-col l2 m2 s12 w3-center">
  
    <img src="https://avatars3.githubusercontent.com/u/1176242?s=460&amp;v=4" width ="100px" class="w3-circle w3-center w3-margin-top w3-margin-bottom" alt="author" >
   
  </div>
  <div class="w3-col l10 m10 s12 ">
  <div class = "w3-container w3-margin-top">
    
    
  </div>
  </div>
  </div>
</div>

      
    <div class="w3-content" > 
      <div class="w3-bar w3-section">
	     
	      <a  href="/2014/01/31/10-intellij-idea-keyboard-shortcuts-must-know/" class="w3-btn w3-text-indigo w3-hover-green">
	          &#10094; 10 IntelliJ IDEA Keyboard Shortcuts That You Must Know
	      </a>
	    
	      <a class="w3-btn w3-right w3-text-indigo w3-hover-green" href="/2013/10/24/launch-website-in-amazon-ec2/">
	       Launch Website in Amazon EC2 &#10095;
	      </a>
  	  </div>
    </div>
	
 

  
  
  

      <div id="wrapads">
        <div class="adBanner">
         
        </div>
       </div>
      
      <div id="allowads" class="allowads-overlay">
  
        <div class="allowads-overlay-content">
        <div class="w3-panel w3-pink w3-large">
        

         <p> We notice you're using an adblocker.  If you like our webite please keep us running by whitelisting this site in your ad blocker. We’re serving quality, related ads only. Thank you!</p>
         
          <div class="w3-btn w3-green"  onclick="closeOverlay()">I've whitelisted your website.</div><br>
          <div class="w3-button w3-small"  onclick="closeOverlay()">Not now</div>
        </div>
        </div>
      </div>

      <script>
      function closeOverlay() {
        document.getElementById("allowads").style.width = "0%";
        document.getElementById("wrapads").style.height="1px";
      }

      function detectads() {
      var h = document.getElementById("wrapads").clientHeight;

      if (h==0){ document.getElementById("allowads").style.width = "100%";
      }
      }
      

     
      
      </script>
        </div>
        
          <script>
  shareurl=encodeURIComponent(location.protocol + '//' + location.host + location.pathname);
  sharetitle=encodeURIComponent(document.title);
    
  </script>
<div class="icon-bar">
<script>
document.write( '<a href="javascript:bookmark();" class="bookmark w3-tooltip"><i class="fa fa-bookmark"></i><span style="position:absolute;left:40px;bottom:18px" class="w3-text w3-small w3-tag w3-round w3-green ">Bookmark this page</span></a> ');

document.write( '<a href="http://www.facebook.com/sharer.php?u='+shareurl+'" onclick="window.open(this.href, \'mywin\',\'left=20,top=20,width=500,height=500,toolbar=1,resizable=0\'); return false;" class="facebook w3-tooltip"><i class="fa fa-facebook "></i><span style="position:absolute;left:40px;bottom:18px" class="w3-text w3-small w3-tag w3-round w3-green">Share to Facebook</span></a> ');

document.write( '<a href="https://twitter.com/share?url='+shareurl+'&amp;text='+sharetitle+'" onclick="window.open(this.href, \'mywin\',\'left=20,top=20,width=500,height=500,toolbar=1,resizable=0\'); return false;" class="twitter w3-tooltip"><i class="fa fa-twitter"></i><span style="position:absolute;left:40px;bottom:18px" class="w3-text w3-small w3-tag w3-round w3-green">Share to Twitter</span></a> ');
document.write( '<a href="https://plus.google.com/share?url='+shareurl+'" onclick="window.open(this.href, \'mywin\',\'left=20,top=20,width=500,height=500,toolbar=1,resizable=0\'); return false;" class="google w3-tooltip"><i class="fa fa-google"></i><span style="position:absolute;left:40px;bottom:18px" class="w3-text w3-small w3-tag w3-round w3-green">Share to Google Plus</span></a>');

document.write( '<a href="http://www.linkedin.com/shareArticle?mini=true&amp;url='+shareurl+'" onclick="window.open(this.href, \'mywin\',\'left=20,top=20,width=500,height=500,toolbar=1,resizable=0\'); return false;" class="linkedin w3-tooltip"><i class="fa fa-linkedin"></i><span style="position:absolute;left:40px;bottom:18px" class="w3-text w3-small w3-tag w3-round w3-green">Share to Linkedin</span></a>');

</script>

<script>
function bookmark(){

if ('sidebar' in window && 'addPanel' in window.sidebar) { 
                window.sidebar.addPanel(location.href,document.title,"");
            } else if(  false) { 
                window.external.AddFavorite(location.href,document.title); 
            } else { 
                alert('Press ' + (navigator.userAgent.toLowerCase().indexOf('mac') != - 1 ? 'Command/Cmd' : 'CTRL') + ' + D to bookmark this page.');
            }
        }

</script>
</div>
        
           
          
  

        
        
      </div>
    

   
    <footer id="footer" >
      <div class="w3-container w3-center w3-padding-32"> 
  
  <hr class="headfoot">
  <p>Powered by <a href="https://gohugo.io">Hugo</a> | Theme - <a href="https://github.com/jesselau76/hugo-w3-simple">Hugo W3 Simple</a>
  </p>
  &copy; <a href="http://javahabit.com">Dinesh Arora</a> 2019 | <a href="https://github.com/dinesh19aug">Github</a> | <a href="https://twitter.com/dinesh19aug">Twitter</a>  | <a href="/index.xml">RSS</a>
  
</div>

    </footer>
    

    
  </div>

  

  
    
      <div id="backtotop" class="w3-hide-small w3-hide-medium">
  
        <button onclick="topFunction()" class="w3-btn w3-red w3-large" style="width:160px">Back To Top
        &rarr;</button>
        
      </div>

      <script>
        function topFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
      }
      </script>


    
 
    
    <script>
    
    function isVisible(elem) {

      let coords = elem.getBoundingClientRect();

      let windowHeight = document.documentElement.clientHeight;

      
      let topVisible = coords.top > 0 && coords.top < windowHeight;
      let bottomVisible = coords.bottom < windowHeight && coords.bottom > 0;

      return topVisible || bottomVisible;
    }

    

    function showVisible() {
      for (let img of document.querySelectorAll('img')) {
        let realSrc = img.dataset.src;
        if (!realSrc) continue;

        if (isVisible(img)) {
          

          img.src = realSrc;

          img.dataset.src = '';
        }
      }
      if ( Array.from(document.querySelectorAll('[data-src]')).every(
        img => img.getAttribute('data-src') === '') ) {
        window.removeEventListener('scroll', showVisible)
      }

    }

    window.addEventListener('scroll', showVisible);
    showVisible();
  </script>


    
    
      <div class="progress-container" id="scrollbar">
        <div class="progress-bar" id="progress-bar"></div>
      </div>  


    
<script>

window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  <!-- TOC -->
    
    <!-- cookie bar -->
    
<!-- Back to top -->
    
    if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
        document.getElementById("backtotop").style.display = "block";
    } else {
        document.getElementById("backtotop").style.display = "none";
    }
    
    <!-- scroll indicator -->
    
      var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      var scrolled = (winScroll / height) * 100;
      document.getElementById("progress-bar").style.width = scrolled + "%";
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("scrollbar").style.display = "block";
        } else {
            document.getElementById("scrollbar").style.display = "none";
        }
    

    

    <!-- allowads -->
    
       if (document.body.scrollTop > 2000 || document.documentElement.scrollTop > 2000) {
          detectads();
       } 

    
}


</script>



  

</body>
</html>
